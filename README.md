# signal_example

UNIXのシグナルを確認するためのプログラムです。
Rubyで書いていますが、他の言語でも同じことができると思います。

下記のページを参考にしました。

https://blog.a-know.me/entry/2016/10/17/070111

## プログラムの説明

### test.rb

シグナルが送られるとメッセージを表示するプログラムです。
対応しているシグナルはSIGHUPとSIGINTです。

```
$ ruby test.rb
```

で実行します。
別のターミナルでPIDを調べ、以下のようにシグナルを送るとメッセージが表示されます。
（以下はPIDが9990の場合の例です)

```
$ kill 9990
$ kill -1 9990
$ kill -9 9990
```

上記のようにシグナルを送ると、下記のように順番にメッセージが表示されます。
なお、SIGKILLについては捕捉できずにプログラムが終了します。

```
SIGTERM !!
SIGHUP !!
強制終了
$
```

### test2.rb

シグナルが送られた回数を表示するプログラムです。
なお、5秒に1回、回数を表示します。

```
$ ruby test2.rb
```

で実行します。
その後、別のターミナルからシグナルを送ります。
（以下の例はPIDが9991の場合の例です)

```
$ kill 9991
$ kill 9991
$ kill 9991
```

上記のようにシグナルを送ると、下記のように順番にメッセージが表示されます。

```
0
0
1
1
2
2
2
2
2
3
3
```

### test3.rb

インターバルにしたがって「.」を表示するプログラムです。
インターバルはシグナルで長くしたり短くしたりできます。

```
$ ruby test3.rb
```

で実行します。
その後、別のターミナルからシグナルを送ります。
（以下の例はPIDが9992の場合の例です)

```
$ kill 9992
$ kill -2 9992
$ kill 9992
```

実際に動かさないと体感できませんが、以下のように表示されます。

```
.....................
```


